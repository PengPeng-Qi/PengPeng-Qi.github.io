---
layout:     post
title:      Ajax+HTTP
date:       2021-07-17
author:     PengPengQi
header-img: img/BackGround.png
catalog: true
tags:
    - Ajax
    - HTTP
    - Notes
---
### URL地址
URL地址一般由三部分组成：  
- 1、客户端与服务端之间的**通信协议**
- 2、存有该资源的**服务器名称**
- 3、资源在服务器上**具体的存放位置**
  
### 分析网页的打开过程
- 1、打开浏览器  
- 2、输入要访问的网站地址  
- 3、回车，向服务器发起资源**请求**  
- 4、服务器接收客户端发来的资源请求  
- 5、服务器在内部**处理**这次请求，找到相关资源  
- 6、服务器把找到的资源，**响应**（发送）给客户端  

### 服务器对外提供了那些资源
如果要在网页中请求服务器上的数据资源，则需要用到`XMLHttpRequest`对象。xhr是浏览器提供的js成员，通过它，可以请求服务器上的数据资源。最简单的用法`var xhrObj = new XMLHttpRequest()`  
  
客户端请求服务器时，**请求的方式**有很多种，最常见的两种请求方式分别为`get`、`post`请求。
- `get`：获取服务端资源
- `post`：向服务器提交数据

### 了解Ajax
Ajax：异步JavaScript和XML，在网页中利用`XMLHttpRequest`对象和**服务器**进行**数据交互**的方式，就是Ajax。  

### jQuery中的Ajax
jQuery对`XMLHttpRequest`进行了封装，提供了一系列Ajax相关的函数，极大地降低了Ajax的使用难度。
- `$.get()`
- `$.post()`
- `$.ajax()`

#### $.get()
用来发起`get`请求，从而将服务器上的资源请求到客户端来进行使用。  
语法：`$.get(url, [data], [callback])`
- `url`：string，必选，要请求的资源地址
- `data`：object，请求资源时携带的参数
- `callback`：function，请求成功时的回调函数

```js
$(function () {
  $('#btnGETINFO').on('click', function () {
    $.get('http://www.liulongbin.top:3006/api/getbooks', { 
      id: 1 
    }, function (res) {
      console.log(res)
    })
  })
})
```

#### $.post()
发起post请求，从而向服务器提交数据。  
语法：`$.post(url, [data], [callback])`
- `url`：string，必选，提交数据的地址
- `data`：object，要提交的数据
- `callback`：function，数据提交成功时的回调函数

```js
$(function () {
  $('#btnPOST').on('click', function () {
    $.post('http://www.liulongbin.top:3006/api/addbook', { 
      bookname: '水浒传', 
      author: '施耐庵', 
      publisher: '天津图书出版社' 
    }, function (res) {
      console.log(res)
    })
  })
})
```
#### $.ajax()
`$.ajax()`是一个功能比较综合的函数，它允许我们对 Ajax 请求进行更详细的配置。
  
```js
$.ajax({
   type: '', // 请求的方式，例如 GET 或 POST
   url: '',  // 请求的 URL 地址
   data: { },// 这次请求要携带的数据
   success: function(res) { } // 请求成功之后的回调函数
})
```
使用`$.ajax()`发起`GET`请求时，只需要将`type`属性的值设置为'GET'即可：
```js
$.ajax({
  type: 'GET', // 请求的方式
  url: 'http://www.liulongbin.top:3006/api/getbooks',  // 请求的 URL 地址
  data: { id: 1 },// 这次请求要携带的数据
  success: function(res) { // 请求成功之后的回调函数
      console.log(res)
  }
})
```
使用`$.ajax()`发起`POST`请求时，只需要将`type`属性的值设置为'POST'即可：
```js
$.ajax({
   type: 'POST', // 请求的方式
   url: 'http://www.liulongbin.top:3006/api/addbook',  // 请求的 URL 地址
   data: { // 要提交给服务器的数据
      bookname: '水浒传',
      author: '施耐庵',
      publisher: '上海图书出版社'
    },
   success: function(res) { // 请求成功之后的回调函数
       console.log(res)
   }
})
```
### 接口
使用Ajax请求数据时，**被请求的URL地址**，就叫做**数据接口**（简称**接口**）。同时，每个接口必须有**请求方式**。  